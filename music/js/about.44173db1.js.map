{"version":3,"sources":["webpack:///./src/views/Hot.vue?aa40","webpack:///./src/components/HotMusic.vue?9e8d","webpack:///src/components/HotMusic.vue","webpack:///./src/components/HotMusic.vue?0241","webpack:///./src/components/HotMusic.vue","webpack:///src/views/Hot.vue","webpack:///./src/views/Hot.vue?58a2","webpack:///./src/views/Hot.vue","webpack:///./src/views/Hot.vue?16d7"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","mb","$attrs","currentMusic","_v","_s","nowDate","$parent","attrs","someHotSongs","paused","on","$event","$emit","directives","name","rawName","value","more","newHotSongs","length","isShowLoading","expression","staticRenderFns","_l","item","index","key","id","updatePlaylist","components","HotSongItem","props","methods","obj","songListItem","component","HotMusic","data","hotSongs","mounted","_this","window","addEventListener","scr","document","documentElement","scrollTop","body","scrHeight","watch","arr","push","n","i","picUrl","al","cd","song","slice","created","$root","date","getMonth","getDate","axios"],"mappings":"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","file":"js/about.44173db1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hot\",class:{ mb: _vm.$attrs.currentMusic }},[_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"title-top\"}),_c('div',{staticClass:\"title-bottom\"},[_vm._v(\" 更新日期： \"),_c('span',[_vm._v(_vm._s(_vm.nowDate))])])]),[(_vm.$parent.$parent.isShowLoading)?_c('img',{staticClass:\"loading\",attrs:{\"src\":require(\"../../public/img/loading.svg\")}}):_c('HotMusic',{attrs:{\"someHotSongs\":_vm.someHotSongs,\"currentMusic\":_vm.$attrs.currentMusic,\"paused\":_vm.$attrs.paused},on:{\"update:music\":function($event){return _vm.$emit('update:music', $event)},\"update:playlist\":function($event){return _vm.$emit('update:playlist', $event)}}})],_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n      !(_vm.more == _vm.newHotSongs.length / 20) && !_vm.$parent.$parent.isShowLoading\n    ),expression:\"\\n      !(more == newHotSongs.length / 20) && !$parent.$parent.isShowLoading\\n    \"}]},[_c('span',{on:{\"click\":function($event){++_vm.more}}},[_vm._v(\"查看完整榜单\")])])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',_vm._l((_vm.someHotSongs),function(item,index){return _c('HotSongItem',{key:item.id,attrs:{\"index\":index,\"item\":item,\"currentMusic\":_vm.$attrs.currentMusic,\"paused\":_vm.$attrs.paused},on:{\"update:music\":function($event){return _vm.$emit('update:music', $event)},\"update:playlist\":function($event){return _vm.updatePlaylist(index)}}})}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ul>\r\n    <HotSongItem\r\n      v-for=\"(item, index) in someHotSongs\"\r\n      :key=\"item.id\"\r\n      :index=\"index\"\r\n      :item=\"item\"\r\n      @update:music=\"$emit('update:music', $event)\"\r\n      :currentMusic=\"$attrs.currentMusic\"\r\n      :paused=\"$attrs.paused\"\r\n      @update:playlist=\"updatePlaylist(index)\"\r\n    />\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nimport HotSongItem from \"@/components/HotSongItem.vue\";\r\nexport default {\r\n  components: {\r\n    HotSongItem,\r\n  },\r\n  props: [\"someHotSongs\"],\r\n  methods: {\r\n    updatePlaylist(index) {\r\n      var obj = {\r\n        songListItem: this.someHotSongs,\r\n        index: index,\r\n      };\r\n      this.$emit(\"update:playlist\", obj);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotMusic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotMusic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HotMusic.vue?vue&type=template&id=b809c150&scoped=true&\"\nimport script from \"./HotMusic.vue?vue&type=script&lang=js&\"\nexport * from \"./HotMusic.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b809c150\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"hot\" :class=\"{ mb: $attrs.currentMusic }\">\n    <div class=\"title\">\n      <div class=\"title-top\"></div>\n      <div class=\"title-bottom\">\n        更新日期： <span>{{ nowDate }}</span>\n      </div>\n    </div>\n    <template>\n      <img\n        v-if=\"$parent.$parent.isShowLoading\"\n        class=\"loading\"\n        src=\"../../public/img/loading.svg\"\n      />\n      <HotMusic\n        v-else\n        :someHotSongs=\"someHotSongs\"\n        @update:music=\"$emit('update:music', $event)\"\n        :currentMusic=\"$attrs.currentMusic\"\n        :paused=\"$attrs.paused\"\n        @update:playlist=\"$emit('update:playlist', $event)\"\n      />\n    </template>\n    <p\n      v-show=\"\n        !(more == newHotSongs.length / 20) && !$parent.$parent.isShowLoading\n      \"\n    >\n      <span @click=\"++more\">查看完整榜单</span>\n    </p>\n  </div>\n</template>\n<script>\nimport HotMusic from \"@/components/HotMusic.vue\";\nexport default {\n  components: {\n    HotMusic,\n  },\n  data() {\n    return {\n      more: 1,\n      hotSongs: [],\n      someHotSongs: [],\n      newHotSongs: [],\n      nowDate: \"\",\n    };\n  },\n  mounted() {\n    // 监听滚动事件\n    var _this = this;\n    window.addEventListener(\"scroll\", function () {\n      // var scr = document.documentElement.scrollTop || document.body.scrollTop;\n      // console.log('scr',scr);\n      // console.log('gaodu',this.$refs.hotBox.offsetHeight);\n      // if (scr > this.$refs.hotBox.offsetHeight*0.5) {\n      //   this.more++;\n      // }\n\n      var scr = document.documentElement.scrollTop || document.body.scrollTop; // 向上滚动的那一部分高度\n      // var clientHeight = document.documentElement.clientHeight; // 屏幕高度也就是当前设备静态下你所看到的视觉高度\n      var scrHeight =\n        document.documentElement.scrollHeight || document.body.scrollHeight; // 整个网页的实际高度，兼容Pc端\n      if (scr > scrHeight / 2) {\n        _this.more++;\n      }\n    });\n  },\n  watch: {\n    hotSongs(n) {\n      // 修改获取到的数组数据\n      var arr = [];\n      for (let i = 0; i < n.length; i++) {\n        arr.push({\n          name: n[i].name,\n          picUrl: n[i].al.picUrl,\n          id: n[i].id,\n          cd: n[i].cd, //判断是否为SQ歌曲\n          song: [],\n        });\n        arr[i].song = [...n[i].ar];\n      }\n      this.newHotSongs = arr;\n    },\n    newHotSongs(n) {\n      this.someHotSongs = n.slice(0, 20);\n    },\n    // 获取更多的歌曲\n    more() {\n      if (this.more > this.newHotSongs.length / 20) {\n        this.more = this.newHotSongs.length / 20;\n      }\n      let newArr = this.newHotSongs.slice(0, 20 * this.more);\n      this.someHotSongs = [...newArr];\n    },\n  },\n  created() {\n    this.$root.isShowLoading = true;\n    // 设置日期\n    let date = new Date();\n    this.nowDate = date.getMonth() + 1 + \"月\" + date.getDate() + \"日\";\n\n    // 获取数据\n    this.axios\n      .get(\"/top/list?idx=1\")\n      .then((res) => {\n        console.log(res);\n        let str = res.data.playlist.trackIds\n          .slice(0, 100)\n          .map((e) => e.id)\n          .join();\n        this.axios.get(\"/song/detail?ids=\" + str).then((response) => {\n          this.hotSongs = response.data.songs;\n          console.log(\"查询结束\");\n        });\n      })\n      .finally(() => {\n        setTimeout(() => {\n          this.$root.isShowLoading = false;\n        }, 1000);\n      });\n  },\n  // beforeRouteEnter(to, from, next) {\n  //   var timer = null;\n  //   timer = setTimeout(function () {\n  //     // 在路由导航前获取ajax数据\n  //     window.axios.get(\"/top/list?idx=1\").then((res) => {\n  //       // console.log(res);\n  //       let str = res.data.playlist.trackIds\n  //         .slice(0, 30)\n  //         .map((e) => e.id)\n  //         .join();\n  //       window.axios.get(\"/song/detail?ids=\" + str).then((response) => {\n  //         console.log(\"路由进入前\");\n  //         // 去往setData方法\n  //         next((vm) => vm.setData(response.data.songs));\n  //         // next((vm) => (vm.hotSongs = response.data.songs));\n  //       });\n  //     });\n  //   }, 300);\n  //   timer;\n  // },\n  // methods: {\n  //   setData(r) {\n  //     // 获取ajax传下来的数据\n  //     this.hotSongs = r;\n  //   },\n  // },\n};\n</script>\n\n<style scoped lang=\"less\">\nimg.loading {\n  display: block;\n  width: 100px;\n  height: 100px;\n  margin: 50px auto;\n}\n.hot {\n  margin-top: -1px;\n  margin-bottom: 20px;\n  .title {\n    width: 100vw;\n    height: 140px;\n    background: url(\"../../public/img/hotsongbg.jpg\") no-repeat;\n    background-size: 100%;\n    padding-left: 20px;\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    .title-top {\n      width: 142px;\n      height: 67px;\n      background: url(\"../../public/img/icon.png\") no-repeat;\n      background-position: -24px -30px;\n      background-size: 166px 97px;\n    }\n    .title-bottom {\n      width: 100%;\n      height: 16px;\n      margin-top: 10px;\n      color: hsla(0, 0%, 100%, 0.8);\n      font-size: 12px;\n    }\n  }\n  p {\n    padding-top: 30px;\n    text-align: center;\n    span {\n      height: 16px;\n      color: #999;\n      font-size: 14px;\n      vertical-align: middle;\n      &::after {\n        content: \"\";\n        display: inline-block;\n        width: 16px;\n        height: 16px;\n        margin-left: 14px;\n        background: url(\"../../public/img/rightArrowhead.svg\") 100% no-repeat;\n        background-size: 7px 12px;\n        background-position: center;\n        vertical-align: middle;\n        margin-top: -3px;\n      }\n    }\n  }\n}\n.mb {\n  margin-bottom: 100px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Hot.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Hot.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Hot.vue?vue&type=template&id=14a947fc&scoped=true&\"\nimport script from \"./Hot.vue?vue&type=script&lang=js&\"\nexport * from \"./Hot.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Hot.vue?vue&type=style&index=0&id=14a947fc&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"14a947fc\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Hot.vue?vue&type=style&index=0&id=14a947fc&scoped=true&lang=less&\""],"sourceRoot":""}