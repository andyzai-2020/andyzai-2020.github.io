(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e494b22"],{"159b":function(t,e,o){var n=o("da84"),r=o("fdbc"),a=o("17c2"),c=o("9112");for(var i in r){var s=n[i],l=s&&s.prototype;if(l&&l.forEach!==a)try{c(l,"forEach",a)}catch(u){l.forEach=a}}},1796:function(t,e,o){t.exports=o.p+"img/night.a2f77c46.svg"},"17c2":function(t,e,o){"use strict";var n=o("b727").forEach,r=o("a640"),a=o("ae40"),c=r("forEach"),i=a("forEach");t.exports=c&&i?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"1b77":function(t,e,o){"use strict";o("c7a8")},"1d03":function(t,e,o){t.exports=o.p+"img/font.a7dfb492.svg"},4160:function(t,e,o){"use strict";var n=o("23e7"),r=o("17c2");n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},5530:function(t,e,o){"use strict";o.d(e,"a",(function(){return a}));o("a4d3"),o("4de4"),o("4160"),o("e439"),o("dbb4"),o("b64b"),o("159b");function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function a(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}},"72c4":function(t,e,o){t.exports=o.p+"img/light.5abe8787.svg"},"857a":function(t,e,o){var n=o("1d80"),r=/"/g;t.exports=function(t,e,o,a){var c=String(n(t)),i="<"+e;return""!==o&&(i+=" "+o+'="'+String(a).replace(r,"&quot;")+'"'),i+">"+c+"</"+e+">"}},9911:function(t,e,o){"use strict";var n=o("23e7"),r=o("857a"),a=o("af03");n({target:"String",proto:!0,forced:a("link")},{link:function(t){return r(this,"a","href",t)}})},a640:function(t,e,o){"use strict";var n=o("d039");t.exports=function(t,e){var o=[][t];return!!o&&n((function(){o.call(null,e||function(){throw 1},1)}))}},af03:function(t,e,o){var n=o("d039");t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b64b:function(t,e,o){var n=o("23e7"),r=o("7b0b"),a=o("df75"),c=o("d039"),i=c((function(){a(1)}));n({target:"Object",stat:!0,forced:i},{keys:function(t){return a(r(t))}})},b7b2:function(t,e,o){t.exports=o.p+"img/category.1b5cccf8.svg"},c740:function(t,e,o){"use strict";var n=o("23e7"),r=o("b727").findIndex,a=o("44d2"),c=o("ae40"),i="findIndex",s=!0,l=c(i);i in[]&&Array(1)[i]((function(){s=!1})),n({target:"Array",proto:!0,forced:s||!l},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a(i)},c7a8:function(t,e,o){},c844:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.content?n("div",{staticClass:"read"},[n("div",{staticClass:"my-container"}),n("div",{staticClass:"my-chapters"}),n("div",{staticClass:"my-controler"}),t._v(" "),n("van-cell",{on:{click:t.showPopup}},[t.content.isVip?[n("h2",[t._v(t._s(t.content.title))]),n("p",{staticClass:"pMinHei",on:{touchstart:t.readtouchstart,touchmove:t.readtouchmove,touchend:t.readtouchend}},[t._v(" 本章节是VIP章节，请升级到VIP再进行阅读 ")])]:[n("h2",[t._v(t._s(t.content.title))]),n("article",{staticClass:"read-article"},[n("section",{ref:"contentSection",staticClass:"read-section",on:{touchstart:t.readtouchstart,touchmove:t.readtouchmove,touchend:t.readtouchend}},t._l(t.content.cpContent.split("\n"),(function(e,o){return n("p",{key:o},[t._v(" "+t._s(e.replace(/(^\s*)|(\s*$)/g,""))+" ")])})),0)]),n("div",{staticClass:"page"},[n("span",[t._v(t._s(t.nowPage+1))]),n("i",[t._v("/")]),n("span",[t._v(t._s(t.allPage+1))])])]],2),n("van-popup",{style:{height:"40px"},attrs:{position:"top","get-container":t.getContainer},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("van-nav-bar",{attrs:{title:t.$route.query.bookName,"left-arrow":""},on:{"click-left":t.Back}})],1),n("van-popup",{style:{height:"20%"},attrs:{position:"bottom",overlay:!1,"get-container":t.getContainer},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{staticClass:"controlChapter"},[n("span",{on:{click:function(e){return t.prevChapter(t.value)}}},[t._v("上一章")]),n("van-slider",{attrs:{step:1,max:t.temporaryChapters.length,"button-size":"15px"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),n("span",{on:{click:function(e){return t.nextChapter(t.value)}}},[t._v("下一章")])],1),n("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tabbar-item",{on:{click:t.showPopup_two}},[n("img",{attrs:{src:o("b7b2")}}),n("p",[t._v("目录")])]),n("van-tabbar-item",{on:{click:function(e){t.isNight=!t.isNight,t.show=!1,t.controlBG(5)}}},[t.isNight?n("img",{attrs:{src:o("1796")}}):n("img",{attrs:{src:o("dc7a")}}),n("p",[t._v("夜间")])]),n("van-tabbar-item",[n("img",{attrs:{src:o("72c4")}}),n("p",[t._v("亮度")])]),n("van-tabbar-item",[n("img",{attrs:{src:o("1d03")},on:{click:t.showPopup_three}}),n("p",[t._v("设置")])])],1)],1),n("van-popup",{style:{height:"22%"},attrs:{position:"bottom","get-container":t.getContainer3},model:{value:t.show3,callback:function(e){t.show3=e},expression:"show3"}},[n("section",[n("div",{staticClass:"control-fs"},[n("span",[t._v("字号")]),n("ol",t._l(["超小","小","中","大","超大"],(function(e,o){return n("li",{key:o,on:{click:function(o){return t.controlFS(e)}}},[t._v(" "+t._s(e)+" ")])})),0)]),n("div",{staticClass:"control-bg"},[n("span",[t._v("主题")]),n("ol",t._l(5,(function(e,o){return n("li",{key:o,on:{click:function(e){return t.controlBG(o)}}})})),0)]),n("div",{staticClass:"control-lh"},[n("span",[t._v("间距")]),n("ol",t._l(3,(function(e,o){return n("li",{key:o,on:{click:function(e){return t.controlLH(o)}}})})),0)])])]),n("van-popup",{style:{width:"45%",height:"100%"},attrs:{position:"left","get-container":t.getContainer2},model:{value:t.show2,callback:function(e){t.show2=e},expression:"show2"}},[n("div",{staticClass:"p-box"},[t.temporaryChapters?n("div",{staticClass:"contain"},t._l(t.temporaryChapters,(function(e,o){return n("p",{key:o,staticClass:"p-chapters"},[n("span",{class:{active:o===t.chaptersIndex},on:{click:function(e){t.updateChaptersIndex(o),t.resetAllChapters(o),t.show2=!1}}},[t._v(" "+t._s(e.title)+" ")])])})),0):t._e()])])],1):n("div",[n("BeTheBest")],1)},r=[],a=(o("99af"),o("c740"),o("4160"),o("d3b7"),o("9911"),o("159b"),o("2909")),c=o("5530"),i=o("2241"),s=o("d399"),l=o("2f62"),u=o("2395"),h={components:{BeTheBest:u["a"]},data:function(){return{content:null,show:!1,show2:!1,show3:!1,active:0,isNight:!1,value:0,valueTimer:null,nowPage:0,allPage:null,pageTimer:null,touchStartX:null,touchMoveX:null,touching:!1}},computed:Object(c["a"])({},Object(l["c"])(["temporaryChapters","chaptersIndex","pageNum"])),watch:{chaptersIndex:function(t){this.searchchapters(),this.value=t},temporaryChapters:function(){this.searchchapters()},value:function(t){var e=this;this.valueTimer&&clearTimeout(this.valueTimer),Object(s["a"])("正在切换章节"),this.valueTimer=setTimeout((function(){e.updateChaptersIndex(t),e.resetAllChapters(t)}),1e3)},nowPage:function(t){this.$refs.contentSection.style.transform="translateX("+-t*(document.body.offsetWidth-50)+"px)"}},created:function(){this.searchchapters(),this.value=this.chaptersIndex},updated:function(){this.getArticleHeight(),this.useStyle()},methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["updateBookRack","updateChaptersIndex"])),{},{searchchapters:function(){var t=this;this.axios.get("http://novel.kele8.cn/chapters/"+encodeURIComponent(this.temporaryChapters[this.chaptersIndex].link)).then((function(e){t.content=e.data.chapter})).finally((function(){t.nowPage=0}))},showPopup:function(){this.show=!0},showPopup_two:function(){this.show2=!0,this.show=!1},showPopup_three:function(){this.show=!1,this.show3=!0},getContainer:function(){return document.querySelector(".my-container")},getContainer2:function(){return document.querySelector(".my-chapters")},getContainer3:function(){return document.querySelector(".my-controler")},controlFS:function(t){var e=this.$refs.contentSection,o=16;switch(t){case"超小":e.style.fontSize="10px",o=10;break;case"小":e.style.fontSize="14px",o=14;break;case"大":e.style.fontSize="20px",o=20;break;case"超大":e.style.fontSize="24px",o=24;break;default:e.style.fontSize="16px",o=16;break}this.getArticleHeight(),this.saveStyle(o,0)},controlBG:function(t){var e="rgb(210, 180, 140)",o=document.querySelector(".van-cell");switch(5==t?t=this.isNight?5:0:this.isNight=!1,t){case 1:o.style.backgroundColor="rgb(204, 232, 207)",e="rgb(204, 232, 207)";break;case 2:o.style.backgroundColor="rgb(247, 238, 229)",e="rgb(247, 238, 229)";break;case 3:o.style.backgroundColor="rgb(248, 218, 207)",e="rgb(248, 218, 207)";break;case 4:o.style.backgroundColor="rgb(209, 194, 166)",e="rgb(209, 194, 166)";break;case 5:o.style.backgroundColor="rgb(0, 0, 0)",e="rgb(0, 0, 0)";break;default:o.style.backgroundColor="rgb(210, 180, 140)",e="rgb(210, 180, 140)";break}this.fontColor(t),this.saveStyle(e,1)},fontColor:function(t){5==t?(document.querySelector(".van-cell__value--alone").style.color="#d3d3d3",document.querySelector("h2").style.color="#d3d3d3"):(document.querySelector(".van-cell__value--alone").style.color="#000",document.querySelector("h2").style.color="#000")},controlLH:function(t){var e=this.$refs.contentSection,o=1.5;switch(t){case 1:e.style.lineHeight=2.5,o=2.5;break;case 2:e.style.lineHeight=3,o=3;break;default:e.style.lineHeight=1.5,o=1.5;break}this.getArticleHeight(),this.saveStyle(o,2)},saveStyle:function(t,e){if(localStorage.getItem("styleModle")){var o=JSON.parse(localStorage.getItem("styleModle"));switch(e){case 0:o.fs=t;break;case 1:o.bg=t;break;case 2:o.lh=t;break}window.localStorage.setItem("styleModle",JSON.stringify(o))}else{var n={fs:16,bg:"rgb(210, 180, 140)",lh:1.5};switch(e){case 0:n.fs=t;break;case 1:n.bg=t;break;case 2:n.lh=t;break}console.log(n),localStorage.setItem("styleModle",JSON.stringify(n))}},useStyle:function(){if(this.$refs.contentSection&&localStorage.getItem("styleModle")){var t=this.$refs.contentSection,e=JSON.parse(localStorage.getItem("styleModle"));t.style.fontSize=e.fs+"px",t.style.lineHeight=e.lh,document.querySelector(".van-cell").style.backgroundColor=e.bg,"rgb(0, 0, 0)"==e.bg&&this.fontColor(5)}},prevChapter:function(t){t--,t=t>0?t:0,this.value=t},nextChapter:function(t){t++,t=t>this.temporaryChapters.length-1?this.temporaryChapters.length-1:t,this.value=t},resetAllChapters:function(t){var e=JSON.parse(localStorage.getItem("allChapters"));e.index=t,localStorage.setItem("allChapters",JSON.stringify(e))},Back:function(){var t=this;if(window.localStorage.getItem("myBookRack")){var e=Object(a["a"])(JSON.parse(localStorage.getItem("myBookRack"))),o=e.findIndex((function(e){return e.id===t.$route.params.id}));-1!==o?(e[o].index=this.chaptersIndex,e[o].chapter=this.temporaryChapters,e[o].expire=Date.now()+864e5,localStorage.setItem("myBookRack",JSON.stringify(Object(a["a"])(e))),console.log("匹配到位，存在"),this.updateBookRack(),this.$router.back()):i["a"].confirm({title:"温馨提示",message:"是否要添加入书架！！！"}).then((function(){var o={id:t.$route.params.id,index:t.chaptersIndex,chapter:t.temporaryChapters,expire:Date.now()+864e5};localStorage.setItem("myBookRack",JSON.stringify([].concat(Object(a["a"])(e),[o]))),Object(s["a"])("加入书架成功 o(￣▽￣)ｄ"),t.updateBookRack(),t.$router.back()})).catch((function(){console.log('你按下了"取消"按钮!'),t.$router.back()}))}else i["a"].confirm({title:"温馨提示",message:"是否要添加入书架！！！"}).then((function(){var e={id:t.$route.params.id,index:t.chaptersIndex,chapter:t.temporaryChapters,expire:Date.now()+36e5};localStorage.setItem("myBookRack",JSON.stringify([e])),t.updateBookRack(),Object(s["a"])("加入书架成功 o(￣▽￣)ｄ"),t.$router.back()})).catch((function(){console.log('你按下了"取消"按钮!'),t.$router.back()}))},getArticleHeight:function(){if(this.$refs.contentSection){var t=this.$refs.contentSection.querySelectorAll("p"),e=0;t.forEach((function(t){e+=t.offsetHeight})),this.allPage=Math.floor(e/this.$refs.contentSection.offsetHeight),this.nowPage>=this.allPage&&(this.nowPage=this.allPage)}else this.allPage=1},readtouchstart:function(t){this.touchStartX=t.targetTouches[0].pageX,this.touching=!0},readtouchmove:function(t){this.touching&&(this.touchMoveX=t.targetTouches[0].pageX)},readtouchend:function(){var t=this;if(this.touchMoveX||(this.touchStartX=null,this.touchMoveX=null),this.touching=!1,this.touchStartX<this.touchMoveX-50&&(this.nowPage--,this.nowPage<0&&(this.nowPage=0,this.chaptersIndex>0))){if(this.pageTimer&&clearTimeout(this.pageTimer),this.pageTimer=setTimeout((function(){t.value--,clearTimeout(t.pageTimer)}),500),this.value<0)return void(this.nowPage=0);this.nowPage=0}if(this.touchMoveX<this.touchStartX-50&&(this.nowPage++,this.nowPage>this.allPage)){if(this.pageTimer&&clearTimeout(this.pageTimer),this.pageTimer=setTimeout((function(){t.value++,clearTimeout(t.pageTimer)}),500),this.value>this.temporaryChapters.length-1)return void(this.nowPage=this.allPage);this.nowPage=this.allPage}this.touchStartX=null,this.touchMoveX=null}})},p=h,f=(o("1b77"),o("2877")),g=Object(f["a"])(p,n,r,!1,null,null,null);e["default"]=g.exports},dbb4:function(t,e,o){var n=o("23e7"),r=o("83ab"),a=o("56ef"),c=o("fc6a"),i=o("06cf"),s=o("8418");n({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,o,n=c(t),r=i.f,l=a(n),u={},h=0;while(l.length>h)o=r(n,e=l[h++]),void 0!==o&&s(u,e,o);return u}})},dc7a:function(t,e,o){t.exports=o.p+"img/day.648f7820.svg"},e439:function(t,e,o){var n=o("23e7"),r=o("d039"),a=o("fc6a"),c=o("06cf").f,i=o("83ab"),s=r((function(){c(1)})),l=!i||s;n({target:"Object",stat:!0,forced:l,sham:!i},{getOwnPropertyDescriptor:function(t,e){return c(a(t),e)}})}}]);
//# sourceMappingURL=chunk-1e494b22.a4b684a4.js.map